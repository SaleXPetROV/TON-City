# üìä –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è TON City

## –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?

–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –Ω–∞–ª–æ–≥ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **—á–µ–º –±–æ–ª—å—à–µ –¥–æ–ª—è —Ä—ã–Ω–∫–∞ —É –∏–≥—Ä–æ–∫–∞, —Ç–µ–º –≤—ã—à–µ –Ω–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞**.

---

## üéØ –ù–∞–ª–æ–≥–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏:

### –ë–∞–∑–æ–≤—ã–π –Ω–∞–ª–æ–≥: 13%
**–£—Å–ª–æ–≤–∏–µ:** –î–æ–ª—è —Ä—ã–Ω–∫–∞ ‚â§ 15%
- –≠—Ç–æ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞** –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –¥–æ—Ö–æ–¥–∞–º (—Å–±–æ—Ä —Å –±–∏–∑–Ω–µ—Å–æ–≤, –ø—Ä–æ–¥–∞–∂–∞ —Ä–µ—Å—É—Ä—Å–æ–≤)
- **–ü—Ä–∏–º–µ—Ä:** –ó–∞—Ä–∞–±–æ—Ç–∞–ª 100 TON ‚Üí –ù–∞–ª–æ–≥ 13 TON ‚Üí –ü–æ–ª—É—á–∏–ª 87 TON

### –ü–æ–≤—ã—à–µ–Ω–Ω—ã–π –Ω–∞–ª–æ–≥: 18%
**–£—Å–ª–æ–≤–∏–µ:** –î–æ–ª—è —Ä—ã–Ω–∫–∞ > 15% –∏ ‚â§ 20%
- –ò–≥—Ä–æ–∫ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é —á–∞—Å—Ç—å —ç–∫–æ–Ω–æ–º–∏–∫–∏
- **–ü—Ä–∏–º–µ—Ä:** –í–ª–∞–¥–µ–µ—Ç 17% –≤—Å–µ—Ö –±–∏–∑–Ω–µ—Å–æ–≤ ‚Üí –ù–∞–ª–æ–≥ 18%

### –í—ã—Å–æ–∫–∏–π –Ω–∞–ª–æ–≥: 25%
**–£—Å–ª–æ–≤–∏–µ:** –î–æ–ª—è —Ä—ã–Ω–∫–∞ > 20% –∏ ‚â§ 25%
- –ö—Ä—É–ø–Ω—ã–π –∏–≥—Ä–æ–∫ —Å –±–æ–ª—å—à–∏–º –≤–ª–∏—è–Ω–∏–µ–º
- **–ü—Ä–∏–º–µ—Ä:** –í–ª–∞–¥–µ–µ—Ç 23% –≤—Å–µ—Ö –±–∏–∑–Ω–µ—Å–æ–≤ ‚Üí –ù–∞–ª–æ–≥ 25%

### –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–ª–æ–≥: 35%
**–£—Å–ª–æ–≤–∏–µ:** –î–æ–ª—è —Ä—ã–Ω–∫–∞ > 25%
- –ú–æ–Ω–æ–ø–æ–ª–∏—Å—Ç –∏–ª–∏ –æ—á–µ–Ω—å –∫—Ä—É–ø–Ω—ã–π –∏–≥—Ä–æ–∫
- **–ü—Ä–∏–º–µ—Ä:** –í–ª–∞–¥–µ–µ—Ç 30% –≤—Å–µ—Ö –±–∏–∑–Ω–µ—Å–æ–≤ ‚Üí –ù–∞–ª–æ–≥ 35%

---

## üìê –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–æ–ª—è —Ä—ã–Ω–∫–∞?

```python
# –î–æ–ª—è —Ä—ã–Ω–∫–∞ = (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–∑–Ω–µ—Å–æ–≤ –∏–≥—Ä–æ–∫–∞ / –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–∑–Ω–µ—Å–æ–≤) √ó 100%

player_businesses = 15  # –£ –∏–≥—Ä–æ–∫–∞ 15 –±–∏–∑–Ω–µ—Å–æ–≤
total_businesses = 100  # –í—Å–µ–≥–æ –≤ –∏–≥—Ä–µ 100 –±–∏–∑–Ω–µ—Å–æ–≤

market_share = (15 / 100) * 100 = 15%

# –ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ = 13% (–±–∞–∑–æ–≤–∞—è)
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–∞:

### –ü—Ä–∏–º–µ—Ä 1: –ú–∞–ª–µ–Ω—å–∫–∏–π –∏–≥—Ä–æ–∫ (3% —Ä—ã–Ω–∫–∞)
```
–ë–∏–∑–Ω–µ—Å—ã: 3 –∏–∑ 100
–î–æ–ª—è —Ä—ã–Ω–∫–∞: 3%
–ù–∞–ª–æ–≥: 13% (–±–∞–∑–æ–≤—ã–π)

–î–æ—Ö–æ–¥ –∑–∞ –¥–µ–Ω—å: 50 TON
–ù–∞–ª–æ–≥: 50 √ó 0.13 = 6.5 TON
–ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥: 43.5 TON
```

### –ü—Ä–∏–º–µ—Ä 2: –°—Ä–µ–¥–Ω–∏–π –∏–≥—Ä–æ–∫ (17% —Ä—ã–Ω–∫–∞)
```
–ë–∏–∑–Ω–µ—Å—ã: 17 –∏–∑ 100
–î–æ–ª—è —Ä—ã–Ω–∫–∞: 17%
–ù–∞–ª–æ–≥: 18% (>15%)

–î–æ—Ö–æ–¥ –∑–∞ –¥–µ–Ω—å: 200 TON
–ù–∞–ª–æ–≥: 200 √ó 0.18 = 36 TON
–ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥: 164 TON
```

### –ü—Ä–∏–º–µ—Ä 3: –ö—Ä—É–ø–Ω—ã–π –∏–≥—Ä–æ–∫ (30% —Ä—ã–Ω–∫–∞)
```
–ë–∏–∑–Ω–µ—Å—ã: 30 –∏–∑ 100
–î–æ–ª—è —Ä—ã–Ω–∫–∞: 30%
–ù–∞–ª–æ–≥: 35% (>25%)

–î–æ—Ö–æ–¥ –∑–∞ –¥–µ–Ω—å: 500 TON
–ù–∞–ª–æ–≥: 500 √ó 0.35 = 175 TON
–ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥: 325 TON
```

---

## üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

### 1. –ë–∞–ª–∞–Ω—Å —ç–∫–æ–Ω–æ–º–∏–∫–∏
- –ü—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç –º–æ–Ω–æ–ø–æ–ª–∏—è–º
- –ú–æ—Ç–∏–≤–∏—Ä—É–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é

### 2. –ß–µ—Å—Ç–Ω–∞—è –∏–≥—Ä–∞
- –ù–æ–≤—ã–µ –∏–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å
- –ö—Ä—É–ø–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ –Ω–µ –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –î–∏–Ω–∞–º–∏—á–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞

### 3. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∑–Ω—ã
- –ù–∞–ª–æ–≥–∏ –∏–¥—É—Ç –≤ –∫–∞–∑–Ω—É –∏–≥—Ä—ã
- –§–∏–Ω–∞–Ω—Å–∏—Ä—É—é—Ç –ø—Ä–∏–∑—ã –∏ –∏–≤–µ–Ω—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## üìä –¢–∞–±–ª–∏—Ü–∞ –Ω–∞–ª–æ–≥–æ–≤—ã—Ö —Å—Ç–∞–≤–æ–∫:

| –î–æ–ª—è —Ä—ã–Ω–∫–∞ | –ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏–≥—Ä–æ–∫–∞ |
|------------|------------------|------------------|
| 0-15%      | 13%              | üü¢ –ú–∞–ª—ã–π –±–∏–∑–Ω–µ—Å   |
| 15-20%     | 18%              | üü° –°—Ä–µ–¥–Ω–∏–π –±–∏–∑–Ω–µ—Å |
| 20-25%     | 25%              | üü† –ö—Ä—É–ø–Ω—ã–π –±–∏–∑–Ω–µ—Å |
| >25%       | 35%              | üî¥ –ú–æ–Ω–æ–ø–æ–ª–∏—Å—Ç     |

---

## ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–¥–µ:

```python
# –í backend/server.py

TAX_BRACKETS = {
    0.25: {"rate": 0.35, "name": "monopolist"},    # >25% ‚Üí 35%
    0.20: {"rate": 0.25, "name": "major"},         # >20% ‚Üí 25%
    0.15: {"rate": 0.18, "name": "significant"},   # >15% ‚Üí 18%
    0.0: {"rate": 0.13, "name": "base"},           # ‚â§15% ‚Üí 13%
}

def calculate_tax_rate(player_businesses, total_businesses):
    if total_businesses == 0:
        return 0.13  # –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞
    
    market_share = player_businesses / total_businesses
    
    for threshold, config in sorted(TAX_BRACKETS.items(), reverse=True):
        if market_share > threshold:
            return config["rate"]
    
    return 0.13  # –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

---

## üéÆ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–≥—Ä—ã:

### –î–ª—è –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤:
- ‚úÖ –ù–∏–∑–∫–∏–π –Ω–∞–ª–æ–≥ 13%
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Ä–æ—Å—Ç –≤–æ–∑–º–æ–∂–µ–Ω
- ‚úÖ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

### –î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –∏–≥—Ä–æ–∫–æ–≤:
- üü° –ù–∞–ª–æ–≥ 18%
- üü° –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–æ—Å—Ç–æ–º –∏ –Ω–∞–ª–æ–≥–∞–º–∏
- üü° –ú–æ–∂–Ω–æ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å

### –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤:
- üî¥ –ù–∞–ª–æ–≥ 25-35%
- üî¥ –§–æ–∫—É—Å –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- üî¥ –í–æ–∑–º–æ–∂–Ω–æ –≤—ã–≥–æ–¥–Ω–µ–µ —Å–æ–∑–¥–∞—Ç—å –∞–ª—å—Ç—ã

---

## ‚ùì FAQ:

**Q: –ù–∞–ª–æ–≥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –¥–æ—Ö–æ–¥–∞–º?**
A: –î–∞, –∫ —Å–±–æ—Ä—É —Å –±–∏–∑–Ω–µ—Å–æ–≤ –∏ –ø—Ä–æ–¥–∞–∂–µ —Ä–µ—Å—É—Ä—Å–æ–≤.

**Q: –ù–∞–ª–æ–≥ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏?**
A: –î–∞, –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–±–æ—Ä–µ –¥–æ—Ö–æ–¥–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–æ–ª—è —Ä—ã–Ω–∫–∞.

**Q: –ú–æ–∂–Ω–æ –ª–∏ —É–∫–ª–æ–Ω–∏—Ç—å—Å—è –æ—Ç –Ω–∞–ª–æ–≥–æ–≤?**
A: –ù–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—é.

**Q: –ù–∞–ª–æ–≥ –∏–¥—ë—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É?**
A: –î–∞, –≤ –∫–∞–∑–Ω—É –∏–≥—Ä—ã (treasury).

---

**–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–µ—Ç –∏–≥—Ä—É —á–µ—Å—Ç–Ω–æ–π –∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π! üéØ**
